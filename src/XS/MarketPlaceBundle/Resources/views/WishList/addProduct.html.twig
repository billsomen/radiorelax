{% set in_cart = 0 %}
{% if app.session %}
  {% if app.session.get('wish_list') %}
    {% set cart = app.session.get('wish_list') %}
    {% for pro_cart in cart.productsCarts if pro_cart.product %}
      {% if pro_cart.product.id == product.id %}
        {% set in_cart = 1 %}
      {% endif %}
    {% endfor %}
  {% else %}
    {% if app.user %}
      {% set cart = app.user.market.wishList %}
      {% for pro_cart in cart.productsCarts if pro_cart.product %}
        {% if pro_cart.product.id == product.id %}
          {% set in_cart = 1 %}
        {% endif %}
      {% endfor %}
    {% endif %}
  {% endif %}
{% endif %}

{#
<div class="loading_spaces text-center" id="loading_spaces">
    <img src="{{ asset('assets/vendor/nivo-slider/dark/loading.gif') }}" class="img-responsive" alt="loading.image"/>
</div>
#}

<span id="span_wish_list_pro_{{ product.id }}">
{% if in_cart %}
  <a href="{{ path('xs_market_place_wish_list') }}" class="addedtowishlist" data-tooltip="" title="Produit dans ma liste de Voeux">
    <i class="fa fa-heart"></i>
  </a>
  {#<button class=addtowishlist" title="Produit dans ma liste de Voeux" disabled> <i class="fa fa-heart"></i></button>#}
  {#<button class="btn btn-default addedtocart" title="Product in Cart!" disabled id="fin_cart_pro_{{ product.id }}"><i class="fa fa-check"></i> <span>Added to Cart</span></button>#}
  {% else %}
  <a href="{{ path('xs_market_place_list_add_product', {'id': product.id, 'list': 'wish_list'}) }}" data-tooltip="" class="addtowishlist"  onclick="addThisToList(event, 'wish_list', '{{ path('xs_market_place_list_add_product', {'id': product.id, 'list': 'wish_list'}) }}')" title="Ajouter Ã  mes Voeux">
    <i class="fa fa-heart"></i>
  </a>
{% endif %}
</span>